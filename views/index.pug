extends layout  

prepend content
  
  // this is a square of video
  .row
    .col-xs-12
      h3 Preview
      video(src="/videos/preview.mp4", type="video/mp4", autoplay, controls, loop, width=500)
  
  br

  .row
    .col-xs-12
      if (viewer.address_qr)
        //- explanation
        p  To Enter, Pay >=$1 in Bitcoin to:
        //- link
        img(src=viewer.address_qr,style="display:block;margin-left:auto;margin-right:auto;")
        a(href=viewer.address)= viewer.address
      else
        button.btn.btn-primary(onclick="generateAddress()") Generate Address

        script.
          function generateAddress() {
            return Promise.resolve($.ajax({
              type: 'GET',
              url: '/address',
              data: {'_csrf':"#{_csrf}"},
              success: function(data) {
                location.reload();
              },
              error: function(data) {
              },
            })).catch(function (reason) {
              console.log(reason);
            });
          }

  br

  //- 18+ disclaimer
  .row.disclaimer
    .col-xs-12
      p You must be 
        strong 18 years or older 
        | to enter #{domain}

  //- enter
  .row
    .col-xs-12
      if (message||error)
        .message
          if (message)
            h5 #{message}
          if (error)
            h5 #{error}
      a.btn.btn-primary(href='/live') Enter
      //- button.btn.btn-primary(onclick="addTime()") Add Time

      //- script.
      //-   function addTime() {
      //-     return Promise.resolve($.ajax({
      //-       type: 'GET',
      //-       url: '/add',
      //-       data: {'_csrf':"#{_csrf}"},
      //-       success: function(data) {
              
      //-       },
      //-       error: function(data) {
      //-       },
      //-     })).catch(function (reason) {
      //-       console.log(reason);
      //-     });
      //-   }